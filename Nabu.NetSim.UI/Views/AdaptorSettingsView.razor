@inherits ReactiveInjectableComponentBase<AdaptorSettingsViewModel>



<Div Class="center center-all" Visibility="@(ViewModel?.Selected is NullAdaptorSettings ? Visibility.Visible : Visibility.Invisible)" >
    <Icon IconSize="@IconSize.x5" Name="@IconName.Home" Style="color: rgba(204, 204, 204, .2)" />
</Div>

<HeaderView Icon="@(ViewModel?.Selected is TCPAdaptorSettings ? IconName.Wifi : IconName.Plug)"
            Heading="@ViewModel?.Selected.Port"
            ShowButton=true
            OnButtonClick="@(() => { ViewModel?.SetSelected(new NullAdaptorSettings()); })" 
            Visibility="@(ViewModel?.Selected is not NullAdaptorSettings ? Visibility.Visible : Visibility.Invisible)"/>
    
<ListGroup Flush Visibility="@(ViewModel?.Selected is not NullAdaptorSettings ? Visibility.Visible : Visibility.Invisible)">
    <ListGroupItem>
            <Div Flex="Flex.JustifyContent.Between" Width="Width.Is100">
            <Heading Size="HeadingSize.Is6" Margin="Margin.Is1.FromBottom">
                <Icon Name="IconName.Server" />
                Source
            </Heading>
        </Div>
        <Paragraph Class="top-sm" Margin="Margin.Is1.FromBottom">
            <Select TValue="string" SelectedValue="@ViewModel?.Selected.Source"
                    SelectedValueChanged="@(v => ViewModel?.SetSource(v))">
                @foreach (var source in ViewModel!.SourceNames)
                {
                    <SelectItem @key=@source value="@source">@source</SelectItem>
                }
            </Select>
        </Paragraph>
    </ListGroupItem>
    <ListGroupItem Visibility="@(ViewModel!.HasMultipleImages ? Visibility.Visible : Visibility.Invisible)">
        <Div Flex="Flex.JustifyContent.Between" Width="Width.Is100">
            <Heading Size="HeadingSize.Is6" Margin="Margin.Is1.FromBottom">
                <Icon Name="IconName.FolderOpen" />
                Program
            </Heading>
        </Div>
        <Paragraph Class="top-sm" Margin="Margin.Is1.FromBottom">
            <Select TValue="string" SelectedValue=@ViewModel.Selected.Program 
                    SelectedValueChanged="@(v => ViewModel.SetImage(v))">
                <!--<option value=""></option>-->
                <Repeater TItem="AvailableImage" Items="ViewModel.Images">
                    <SelectItem @key=@context Value="@context.Name">@context.DisplayName</SelectItem>
                </Repeater>
            </Select>
        </Paragraph>
    </ListGroupItem>
    <ListGroupItem Visibility="@ViewModel.TCPServerVisible">
        <HeaderView Heading="TCP Server" Icon="@IconName.Server" />
    </ListGroupItem>
    <ListGroupItem Visibility="@ViewModel.TCPServerVisible">
        <Paragraph>
            <Container>
                <Row>
                    <Column>Active:</Column>
                    <Column>@ViewModel.Selected.TCPServerActive</Column>
                </Row>
                <Row Visibility="@ViewModel.TCPServerActive">
                    <Column>Protocol:</Column>
                    <Column>@ViewModel.Selected.TCPServerProtocol</Column>
                </Row>
                <Row Visibility="@ViewModel.TCPServerActive">
                    <Column>Port:</Column>
                    <Column>@ViewModel.Selected.TCPServerPort</Column>
                </Row>
            </Container>
        </Paragraph>
    </ListGroupItem>
</ListGroup>

<ListGroup Flush>
    <ListGroupItem>
        <Div Class="hstack">
            <Button Type="ButtonType.Button" 
                    Class="btn btn-primary" 
                    onclick="@(() => ViewModel.SetFilesPath(ViewModel.Selected.StoragePath))" 
                    data-bs-toggle="tooltip"
                    title="Browse Storage" 
                    Visibility="@ViewModel.BrowseVisible">
                <Icon Name="IconName.FolderOpen" />
            </Button>
            <EmulatorButtonView Adaptor="@ViewModel.Selected" />
        </Div>
    </ListGroupItem>
</ListGroup>
    

