using Gry.Caching;using Lgc;using Microsoft.AspNetCore.Mvc;using Nabu.Network;using Nabu.Settings;using System.IO;namespace Nabu.NetSimWeb.Controllers;[Route("api/[controller]")][ApiController]public class DownloadController(LocationService location) : ControllerBase{    [HttpGet, DisableRequestSizeLimit]    [Route("{*path}")]    public async Task<IActionResult> Download(        [FromRoute]string path    )    {        var filename = Path.GetFileName(path);        var filePath = Path.Combine(location.Home, path.Replace(".", ""));        if (!Path.Exists(filePath))        {            return NotFound();        }        try        {            var file = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);            return File(file, "application/octet-stream", filename);        }        catch (Exception ex)        {            return BadRequest(ex.Message);        }    }}